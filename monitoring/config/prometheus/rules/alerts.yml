groups:
  - name: mon_ps_alerts
    interval: 30s
    rules:
      # Alerte Bankroll critique
      - alert: BankrollCritique
        expr: monps_bankroll < 900
        for: 1m
        labels:
          severity: critical
          component: bankroll
        annotations:
          summary: "üî¥ Bankroll critique"
          description: "Bankroll actuel: {{ $value }}‚Ç¨. Seuil critique: 900‚Ç¨. ACTION REQUISE!"

      # Alerte Win Rate faible
      - alert: WinRateFaible
        expr: monps_win_rate < 50
        for: 5m
        labels:
          severity: warning
          component: performance
        annotations:
          summary: "‚ö†Ô∏è Win rate trop faible"
          description: "Win rate actuel: {{ $value }}%. Seuil minimal: 50%"

      # Alerte ROI n√©gatif
      - alert: ROINegatif
        expr: monps_roi < 0
        for: 5m
        labels:
          severity: warning
          component: performance
        annotations:
          summary: "‚ö†Ô∏è ROI n√©gatif d√©tect√©"
          description: "ROI actuel: {{ $value }}%. Strat√©gie √† revoir."

      # Alerte Backend down
      - alert: BackendDown
        expr: up{job="monps_backend"} == 0
        for: 1m
        labels:
          severity: critical
          component: system
        annotations:
          summary: "üî¥ Backend Mon_PS hors ligne"
          description: "Le backend ne r√©pond plus. V√©rifier les logs imm√©diatement!"

      # Alerte Bankroll warning
      - alert: BankrollWarning
        expr: monps_bankroll < 950 and monps_bankroll >= 900
        for: 5m
        labels:
          severity: warning
          component: bankroll
        annotations:
          summary: "‚ö†Ô∏è Bankroll faible"
          description: "Bankroll actuel: {{ $value }}‚Ç¨. Approche du seuil critique (900‚Ç¨)"
