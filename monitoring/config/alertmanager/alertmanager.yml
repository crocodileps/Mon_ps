global:
  resolve_timeout: 5m
  smtp_from: 'karouche.myriam@gmail.com'
  smtp_smarthost: 'smtp.gmail.com:587'
  smtp_auth_username: 'karouche.myriam@gmail.com'
  smtp_auth_password: 'vozuzectmdzgfymx'
  smtp_require_tls: true

route:
  receiver: 'email-alerts'
  group_by: ['alertname', 'sport', 'match']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 24h
  
  routes:
    - match:
        severity: high
      receiver: 'email-alerts'
      group_wait: 10s
      group_interval: 5m
      repeat_interval: 24h

receivers:
  - name: 'email-alerts'
    email_configs:
      - to: 'karouche.myriam@gmail.com'
        send_resolved: true
        html: |
          <h2>ðŸŽ¯ Mon_PS Trading - OpportunitÃ©s DÃ©tectÃ©es</h2>
          <p><strong>{{ .CommonLabels.alertname }}</strong></p>
          {{ range .Alerts }}
          <div style="padding: 10px; margin: 10px 0; background: #f0f0f0; border-left: 4px solid #ff6b6b;">
            <p><strong>Match:</strong> {{ .Labels.home_team }} vs {{ .Labels.away_team }}</p>
            <p><strong>Sport:</strong> {{ .Labels.sport }}</p>
            <p><strong>Spread:</strong> {{ .Labels.spread_pct }}%</p>
            <p><strong>Bookmakers:</strong> {{ .Labels.nb_bookmakers }}</p>
            <p><strong>Commence:</strong> {{ .Labels.commence_time }}</p>
          </div>
          {{ end }}
